\documentclass{article}

\usepackage{expl3}
\usepackage{l3draw}

\ExplSyntaxOn

\tl_new:N \l__svg_point_tl
\tl_new:N \l__svg_cpoint_tl
\tl_new:N \l__svg_action_tl
\tl_new:N \l__svg_token_tl
\seq_new:N \l__svg_points_seq

\tl_new:N \l__svg_actions_tl
\tl_set:Nn \l__svg_actions_tl {MmLlHhVvQqCcSsTtAZz}

\tl_new:N \l__svg_digits_tl
\tl_set:Nn \l__svg_digits_tl {0123456789}

\tl_new:N \l__svg_minus_tl
\tl_set:Nn \l__svg_minus_tl {-}
\tl_new:N \l__svg_comma_tl
\tl_set:Nn \l__svg_comma_tl {,}
\tl_new:N \l__svg_semicolon_tl
\tl_set:Nn \l__svg_semicolon_tl {;}
\tl_new:N \l__svg_period_tl
\tl_set:Nn \l__svg_period_tl {.}

\tl_map_inline:Nn \l__svg_actions_tl
{
  \tl_new:c {l__svg_action_#1_tl}
  \tl_set:cn {l__svg_action_#1_tl} {#1}
}

\cs_generate_variant:Nn \draw_path_moveto:n {x}
\cs_generate_variant:Nn \draw_path_lineto:n {x}
\cs_generate_variant:Nn \draw_path_curveto:nnn {xxx}

\cs_new_nopar:Npn \svg_do_action:NNN #1#2#3
{

  \tl_case:Nn #2
  {
    \l__svg_action_M_tl
    {
      \draw_path_moveto:n {
        \seq_item:Nn #3 {1},
        \seq_item:Nn #3 {2}
      }
      \tl_set:Nx #1 {
        {\seq_item:Nn #3 {1}}
        {\seq_item:Nn #3 {2}}
      }
    }
    \l__svg_action_m_tl
    {
      \draw_path_moveto:n {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {1},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {2}
      }
      \tl_set:Nx #1 {
        {\fp_eval:n {\tl_item:Nn #1 {1} + \seq_item:Nn #3 {1}}}
        {\fp_eval:n {\tl_item:Nn #1 {2} + \seq_item:Nn #3 {2}}}
      }
    }
    \l__svg_action_L_tl
    {
      \draw_path_lineto:n {
        \seq_item:Nn #3 {1},
        \seq_item:Nn #3 {2}
      }
      \tl_set:Nx #1 {
        {\seq_item:Nn #3 {1}}
        {\seq_item:Nn #3 {2}}
      }
    }
    \l__svg_action_l_tl
    {
      \draw_path_lineto:n {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {1},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {2}
      }
      \tl_set:Nx #1 {
        {\fp_eval:n {\tl_item:Nn #1 {1} + \seq_item:Nn #3 {1}}}
        {\fp_eval:n {\tl_item:Nn #1 {2} + \seq_item:Nn #3 {2}}}
      }
    }
    \l__svg_action_H_tl
    {
      \draw_path_lineto:n {
        \seq_item:Nn #3 {1},
        \tl_item:Nn #1 {2}
      }
      \tl_set:Nx #1 {
        {\seq_item:Nn #3 {1}}
        {\tl_item:Nn #1 {2}}
      }
    }
    \l__svg_action_h_tl
    {
      \draw_path_lineto:n {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {1},
        \tl_item:Nn #1 {2}
      }
      \tl_set:Nx #1 {
        {\fp_eval:n {\tl_item:Nn #1 {1} + \seq_item:Nn #3 {1}}}
        {\fp_eval:n {\tl_item:Nn #1 {2}}}
      }
    }
    \l__svg_action_V_tl
    {
      \draw_path_lineto:n {
        \tl_item:Nn #1 {1},
        \seq_item:Nn #3 {1}
      }
      \tl_set:Nx #1 {
        {\tl_item:Nn #1 {1}}
        {\seq_item:Nn #3 {1}}
      }
    }
    \l__svg_action_v_tl
    {
      \draw_path_lineto:n {
        \tl_item:Nn #1 {1},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {1}
      }
      \tl_set:Nx #1 {
        {\tl_item:Nn #1 {1}}
        {\fp_eval:n {\tl_item:Nn #1 {2} + \seq_item:Nn #3 {1}}}
      }
    }
    \l__svg_action_Z_tl
    {
      \draw_path_close:
    }
    \l__svg_action_z_tl
    {
      \draw_path_close:
    }
    \l__svg_action_Q_tl
    {
      \draw_path_curveto:nnn
      {
        \seq_item:Nn #3 {1},
        \seq_item:Nn #3 {2}
      }
      {
        \seq_item:Nn #3 {1},
        \seq_item:Nn #3 {2}
      }
      {
        \seq_item:Nn #3 {3},
        \seq_item:Nn #3 {4}
      }
      \tl_set:Nx #1 {
        {\seq_item:Nn #3 {3}}
        {\seq_item:Nn #3 {4}}
      }
    }
    \l__svg_action_q_tl
    {
      \draw_path_curveto:nnn
      {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {1},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {2}
      }
      {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {1},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {2}
      }
      {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {3},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {4}
      }
      \tl_set:Nx #1 {
        {\fp_eval:n {\tl_item:Nn #1 {1} + \seq_item:Nn #3 {3}}}
        {\fp_eval:n {\tl_item:Nn #1 {2} + \seq_item:Nn #3 {4}}}
      }
    }
    \l__svg_action_C_tl
    {
      \draw_path_curveto:nnn
      {
        \seq_item:Nn #3 {1},
        \seq_item:Nn #3 {2}
      }
      {
        \seq_item:Nn #3 {3},
        \seq_item:Nn #3 {4}
      }
      {
        \seq_item:Nn #3 {5},
        \seq_item:Nn #3 {6}
      }
      \tl_set:Nx #1 {
        {\seq_item:Nn #3 {5}}
        {\seq_item:Nn #3 {6}}
      }
    }
    \l__svg_action_c_tl
    {
      \draw_path_curveto:nnn
      {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {1},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {2}
      }
      {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {3},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {4}
      }
      {
        \tl_item:Nn #1 {1} + \seq_item:Nn #3 {5},
        \tl_item:Nn #1 {2} + \seq_item:Nn #3 {6}
      }
      \tl_set:Nx #1 {
        {\fp_eval:n {\tl_item:Nn #1 {1} + \seq_item:Nn #3 {5}}}
        {\fp_eval:n {\tl_item:Nn #1 {2} + \seq_item:Nn #3 {6}}}
      }
    }
  }
}

\cs_new_nopar:Npn \draw_svg:n #1
{
  \tl_clear:N \l__svg_point_tl
  \tl_clear:N \l__svg_action_tl
  \tl_clear:N \l__svg_cpoint_tl
  \seq_clear:N \l__svg_points_seq
  \tl_set:Nn \l__svg_path_tl {#1}
  \tl_set:Nn \l__svg_cpoint_tl {{0}{0}}

  \tl_replace_all:Nnn \l__svg_path_tl {~} {;}
  
  \tl_map_inline:Nn \l__svg_path_tl {
    \tl_if_in:NnTF \l__svg_actions_tl {##1}
    {
      \tl_if_empty:NF \l__svg_point_tl {
        \seq_put_right:NV \l__svg_points_seq \l__svg_point_tl
      }
      % Got an action, so apply previous action and reset state
      \tl_if_empty:NF \l__svg_action_tl
      {
        \svg_do_action:NNN \l__svg_cpoint_tl \l__svg_action_tl \l__svg_points_seq
      }

      % Set the new action
      \tl_set:Nn \l__svg_action_tl {##1}
      % Clear the current number
      \tl_clear:N \l__svg_point_tl
      % Clear the sequence of points
      \seq_clear:N \l__svg_points_seq
    }
    {
      \tl_if_in:NnTF \l__svg_digits_tl {##1}
      {
        % Got a digit, so append to current number
        \tl_put_right:Nn \l__svg_point_tl {##1}
      }
      {

        \tl_if_blank:nTF {##1} {
          % Got a blank, so if we have a point, add it to the list
          \tl_if_empty:NF \l__svg_point_tl {
            \seq_put_right:NV \l__svg_points_seq \l__svg_point_tl
          }
          \tl_clear:N \l__svg_point_tl
        }
        {
          \tl_set:Nn \l__svg_token_tl {##1}
          \tl_case:Nn \l__svg_token_tl
          {
            \l__svg_semicolon_tl {
              \tl_if_empty:NF \l__svg_point_tl {
                \seq_put_right:NV \l__svg_points_seq \l__svg_point_tl
              }
              \tl_clear:N \l__svg_point_tl
            }
            \l__svg_minus_tl {
              % A minus sign means a new number
              \tl_if_empty:NF \l__svg_point_tl {
                \seq_put_right:NV \l__svg_points_seq \l__svg_point_tl
              }
              \tl_set:Nn \l__svg_point_tl {-}
            }
            \l__svg_comma_tl {
              % A comma means a new number
              \tl_if_empty:NF \l__svg_point_tl {
                \seq_put_right:NV \l__svg_points_seq \l__svg_point_tl
              }
              \tl_clear:N \l__svg_point_tl
            }
            \l__svg_period_tl {
              % A dot could mean a new number or a decimal
              %
              % Do we already have a dot in the current number?
              \tl_if_in:NnTF \l__svg_point_tl {.}
              {
                % Yes, so a dot means a new number
                \tl_if_empty:NF \l__svg_point_tl {
                  \seq_put_right:NV \l__svg_points_seq \l__svg_point_tl
                }
                \tl_set:Nn \l__svg_point_tl {.}
              }
              {
                % No, so we're adding this to the current number
                \tl_put_right:Nn \l__svg_point_tl {.}
              }
            }
          }
        }
      }
    }
  }
  \tl_if_empty:NF \l__svg_point_tl {
    \seq_put_right:NV \l__svg_points_seq \l__svg_point_tl
  }
  \tl_if_empty:NF \l__svg_action_tl
  {
    \svg_do_action:NNN \l__svg_cpoint_tl \l__svg_action_tl \l__svg_points_seq
  }

}

\ExplSyntaxOff

\begin{document}

\ExplSyntaxOn
\draw_begin:
\draw_svg:n { M37,17v15H14V17z M50,0H0v50h50z  }
\draw_svg:n { M0,0Q50,50~ 100,0 }
\draw_svg:n { M0,0C50,50~ 100,50~ 150,0 }
\draw_path_use:n {stroke}
\draw_end:
\ExplSyntaxOff

\end{document}
